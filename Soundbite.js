!function(a){var b=function(){return window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return(new Date).getTime()}}(),c=function(){var a,b,c,d,e=document.createElement("div");return e.classList&&e.classList.add&&e.classList.remove?{add:function(a,b){a.classList.add(b)},remove:function(a,b){a.classList.remove(b)}}:(a=function(a){return!!a},c=/^\s+/,d=/\s+$/,b=function(a){return a.replace(c,"").replace(d,"")},{add:function(c,d){var e;e=c.className.split(" ").filter(a).map(b),-1===e.indexOf(d)&&(c.className+=" "+d)},remove:function(c,d){var e,f;e=c.className.split(" ").filter(a).map(b),f=e.indexOf(d),-1!==f&&e.splice(f,1),c.className=e.join(" ")}})}(),d=function(){return function(a){var b,c;if(c=(b=a.getAttribute("data-soundbite"))?JSON.parse(b):{},(b=a.getAttribute("data-audio"))&&(-1!==b.indexOf(",")&&(c.sources=b.split(",")),c.sources=/\.(?:mp3|ogg)$/.test(b)?[b]:[b+".mp3",b+".ogg"]),!c.sources)throw new Error("You must specify at least one audio source");return c}}(),e=function(){return function(a,b,c){var d,e;if(!c.requestAnimationFrame){for(d=0;d<a.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[a[d]+"RequestAnimationFrame"];c.requestAnimationFrame||(e=c.setTimeout,c.requestAnimationFrame=function(a){var c,d,f;return c=Date.now(),d=Math.max(0,16-(c-b)),f=e(function(){a(c+d)},d),b=c+d,f})}}(["ms","moz","webkit","o"],0,window),window.requestAnimationFrame}(),f=function(a,b){return function(c){var d=function(){var e,f,g;c.playing&&(b(d),e=a(),f=e-c._currentTimeSampleTime,g=c._currentTime+f/1e3,c.progress.style.width=100*g/c.duration+"%")};d()}}(b,e),g=function(a,b){return function(c){c._currentTime=c.audio.currentTime,c._currentTimeSampleTime=a(),b.remove(c.outer,"soundbite-ready"),b.add(c.outer,"soundbite-playing")}}(b,c),h=function(a,b){return function(c){c._currentTime=c.audio.currentTime,c._currentTimeSampleTime=a(),b.remove(c.outer,"soundbite-playing"),b.add(c.outer,"soundbite-ready")}}(b,c),i=function(a,b,c,d,e){return function(a){var f,g,h;g=a.outer,h=a.audio,f=a._handlers={},g.addEventListener("click",f.click=function(){a.ready&&(a.playing?(a.playing=!1,a.pause()):a.play())},!1),f.touchend=function(){a.playing?(a.playing=!1,a.pause()):a.play(),g.removeEventListener("touchend",f.touchend,!1)},g.addEventListener("touchstart",f.touchstart=function(b){b.preventDefault(),a.ready&&(this.addEventListener("touchend",f.touchend,!1),setTimeout(function(){g.removeEventListener("touchend",f.touchend,!1)},400))},!1),h.addEventListener("durationchange",f.ready=function(){a.duration=this.duration,a.ready||(b.add(g,"soundbite-ready"),b.add(g,"soundbite-play"),a.ready=!0)},!1),h.addEventListener("progress",f.ready,!1),h.addEventListener("play",f.play=function(){a.playing=!0,d(a),c(a)},!1),h.addEventListener("pause",f.pause=function(){a.playing=!1,e(a)},!1),h.addEventListener("ended",f.ended=function(){this.pause(),a.playing=!1,e(a),a.progress.style.width="100%"},!1)}}(b,c,f,g,h),j=function(){var a,b;return a=["click","touchstart","touchend"],b=["play","pause","ended"],function(c){var d,e,f;e=c.outer,f=c.audio,d=c._handlers,a.forEach(function(a){e.removeEventListener(a,d[a],!1)}),b.forEach(function(a){f.removeEventListener(a,d[a],!1)}),f.removeEventListener("durationchange",d.ready,!1),f.removeEventListener("progress",d.ready,!1)}}(),k=function(a){return function(b){b.outer=document.createElement("span"),a.add(b.outer,"soundbite-outer"),a.add(b.outer,"soundbite-idle"),b.bg=document.createElement("span"),a.add(b.bg,"soundbite-bg"),a.add(b.bg,"soundbite-idle"),b.outer.appendChild(b.bg),b.progress=document.createElement("span"),a.add(b.progress,"soundbite-progress"),b.bg.appendChild(b.progress),b.el.parentNode.insertBefore(b.outer,b.el),b.outer.appendChild(b.el)}}(c),l=function(){return function(a){a.outer.parentNode.insertBefore(a.el,a.outer),a.outer.parentNode.removeChild(a.outer),a.audio=null,a.el=null,a.outer=null,a.bg=null,a.progress=null,a.icon=null}}(),m=function(a,b,c,d,e,f,g){var h,i,j=[];return document.createElement("audio").play?(h=function(a,b){var e=this;return a.soundbite?a.soundbite:this instanceof h?(this.options=b||c(a),this.el=a,this.audio=new Audio,this.audio.volume=this.options.volume||1,f(this),d(this),this.options.sources.forEach(function(a){var b=document.createElement("source");b.src=a,e.audio.appendChild(b)}),a.soundbite=this,j.push(this),void 0):new h(a,b)},h.prototype={constructor:h,play:function(){this.audio.play()},pause:function(){this.audio.pause()},teardown:function(){e(this),g(this)}},h.init=function(a){var b;for(void 0===a?a=document.getElementsByClassName("soundbite"):"string"==typeof a&&(a=document.querySelectorAll(a)),b=a.length;b--;)new h(a[b])},h.teardown=function(){for(;j.length;)j.pop().teardown()},h):(i=function(){},h=function(){},h.prototype={play:i,pause:i,teardown:i},h.init=h.teardown=i,h)}(b,c,d,i,j,k,l),n=function(a){return a}(m);"function"==typeof define&&define.amd?define(function(){return n}):"undefined"!=typeof module&&module.exports?module.exports=n:a.Soundbite=n}("undefined"!=typeof window?window:this);